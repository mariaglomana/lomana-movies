(this["webpackJsonplomana-movies"]=this["webpackJsonplomana-movies"]||[]).push([[0],{115:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),i=n(17),o=n.n(i),s=n(23),l=n(245),u=n(262),d=n(148),j={primary:{main:"#4762ff",light:"#4ae1da",dark:"#7256ea",contrastText:"#fff"},secondary:{main:"#ff6363",light:"#fe91ca",dark:"#d3dbff",contrastText:"#fff"},tertiary:{main:"#ac1de1"},text:{primary:"#000000",secondary:"#828282"}},b=Object(d.a)({palette:j,typography:{button:{textTransform:"none"}}}),p=(n(115),n(16)),m=n(13),f=n(58),h=n(4),O=n(7),x=n(259),g=n(260),v=n(263),y=n(261),w=n(248),k=n(146),S=n.n(k),_=n(265),C=n(239),N=n(243),B=n(85),F=n(242),I=n.p+"static/media/logo.6235333c.png",T=Object(C.a)((function(e){return{container:{marginTop:e.spacing(12),marginBottom:e.spacing(4),height:500,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around"},paper:{marginTop:e.spacing(16),marginBottom:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},logo:{maxWidth:300},copyright:{marginTop:e.spacing(4)},link:{fontWeight:700,"&:hover":{textDecoration:"none",color:e.palette.primary}},marginBottom:{marginBotton:e.spacing(4)},marginTop:{marginTop:e.spacing(2)},btns_container:{display:"flex",flexDirection:"column",marginBotton:e.spacing(10),alignItems:"center"}}}));function A(){var e=T();return Object(a.jsx)(_.a,{className:e.copyright,children:Object(a.jsxs)(B.a,{variant:"body2",color:"textSecondary",component:"span",style:{flexDirection:"row"},children:["Made with \ud83d\udc9c by ",Object(a.jsx)(F.a,{href:"https://www.linkedin.com/in/mariagarciadelomana/",target:"_blank",rel:"noreferrer","aria-label":"go to mariaglomana linkedin",className:e.link,underline:"none",children:Object(a.jsx)(B.a,{variant:"body2",component:"span",className:e.link,color:"textSecondary",children:"mariaglomana"})})," - ".concat((new Date).getFullYear()),"."]})})}var E=function(){var e=T();return Object(a.jsxs)(_.a,{component:"main",maxWidth:"sm",className:e.container,children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(B.a,{variant:"h2",color:"textPrimary",children:"Welcome to"}),Object(a.jsx)("img",{src:I,className:e.logo,alt:"Movies Logo"})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(_.a,{className:e.btns_container,children:[Object(a.jsx)(N.a,{component:s.b,to:"/sign_up",variant:"contained",color:"primary","aria-label":"sign up",children:"Create new account"}),Object(a.jsxs)(B.a,{variant:"body2",color:"textPrimary",className:e.marginTop,children:["Already have an account?",Object(a.jsx)(N.a,{component:s.b,to:"/sign_in",variant:"text",color:"secondary","aria-label":"sign in",children:"Sign in"})]})]}),Object(a.jsx)(A,{})]})]})},M=n(86),D=n(87);function W(){var e=Object(M.a)(['\n  width: 100px;\n  height: "auto";\n']);return W=function(){return e},e}var L=D.a.img(W()),z=function(){return Object(a.jsx)(F.a,{href:"https://www.linkedin.com/in/mariagarciadelomana/",target:"_blank",rel:"noreferrer","aria-label":"go to Lomana's linkedin",children:Object(a.jsx)(L,{src:I,alt:"Movies Logo"})})},P=n(11),q=n(244),R=n(135),G=n.n(R),U=n(136),V=n.n(U),J=n(89),Y=n.n(J),Z=n(139),$=n.n(Z),H=n(137),X=n.n(H),K=n(138),Q=n.n(K),ee=n(28);var te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=Object(r.useState)(e),c=Object(m.a)(a,2),i=c[0],o=c[1],s=Object(r.useState)(!0),l=Object(m.a)(s,2),u=l[0],d=l[1],j=Object(r.useState)(!1),b=Object(m.a)(j,2),p=b[0],h=b[1],O=Object(r.useCallback)((function(){return Object.keys(t).some((function(e){var n=t[e].required,a=i[e].value,r=i[e].error;return n&&!a||r}))}),[i,t]),x=Object(r.useCallback)((function(e){h(!0);var n=e.target.name,a=e.target.value,r="";t[n].required&&(a||(r="This is a required field.")),null!==t[n].validator&&"object"===typeof t[n].validator&&a&&!t[n].validator.regEx.test(a)&&(r=t[n].validator.error),o((function(e){return Object(ee.a)(Object(ee.a)({},e),{},Object(f.a)({},n,{value:a,error:r}))}))}),[t]),g=Object(r.useCallback)((function(e){e.preventDefault(),O()||n(i)}),[i,n,O]);return Object(r.useEffect)((function(){d(!0)}),[]),Object(r.useEffect)((function(){p&&d(O())}),[i,p,O]),{state:i,disable:u,handleOnChange:x,handleOnSubmit:g}},ne=n(8),ae=n.n(ne),re=n(12),ce=n(25),ie=n.n(ce),oe="https://front-assignment.planetdataset.com/api/v1/candidates/a3b83890-4e70-4e75-9ca6-76e4720548a0/",se={candidate_id:"a3b83890-4e70-4e75-9ca6-76e4720548a0"};function le(){return(le=Object(re.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie()({method:"post",url:"".concat(oe,"/users"),data:Object(ee.a)(Object(ee.a)({},se),{},{user:t})});case 3:if(201!==(null===(n=e.sent)||void 0===n?void 0:n.status)){e.next=8;break}return e.abrupt("return",{success:!0,data:n.data});case 8:if(422!==(null===n||void 0===n?void 0:n.status)){e.next=12;break}return e.abrupt("return",{success:!1,error:"This email has already been registered"});case 12:return e.abrupt("return",{success:!1,error:"An error has occurred. Please, try again later."});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Unable to register new user: ",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}var ue=function(e){return le.apply(this,arguments)};function de(){return(de=Object(re.a)(ae.a.mark((function e(t){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ie()({method:"post",url:"".concat(oe,"/users/login"),data:Object(ee.a)(Object(ee.a)({},se),t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var je=function(e){return de.apply(this,arguments)};function be(){return(be=Object(re.a)(ae.a.mark((function e(){var t,n,a,r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.sessionStorage.getItem("jwt_movies"),n="".concat(oe,"/users/profile"),a={Authorization:"Bearer ".concat(t)},e.prev=3,e.next=6,ie.a.get(n,{headers:a});case 6:if(200!==(null===(r=e.sent)||void 0===r?void 0:r.status)){e.next=9;break}return e.abrupt("return",r.data);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("Unable to get movies: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}var pe=function(){return be.apply(this,arguments)};function me(){return(me=Object(re.a)(ae.a.mark((function e(t){var n,a,r,c,i;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.sessionStorage.getItem("jwt_movies"),a="".concat(oe,"/users/profile"),r={user:t},c={Authorization:"Bearer ".concat(n)},e.prev=4,e.next=7,ie.a.put(a,r,{headers:c});case 7:if(200!==(null===(i=e.sent)||void 0===i?void 0:i.status)){e.next=10;break}return e.abrupt("return",i.data);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.error("Unable to get movies: ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)}var fe=function(e){return me.apply(this,arguments)};function he(){return(he=Object(re.a)(ae.a.mark((function e(t,n){var a,r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.sessionStorage.getItem("jwt_movies")){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,Oe(a,t,n);case 5:if(r=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e,t,n){return xe.apply(this,arguments)}function xe(){return(xe=Object(re.a)(ae.a.mark((function e(t,n,a){var r,c,i,o;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(oe,"/movies/").concat(n),c=JSON.stringify(Object(ee.a)(Object(ee.a)({},se),a)),i={Authorization:"Bearer ".concat(t)},e.prev=3,e.next=6,ie.a.get(r,{params:c,headers:i});case 6:if(200!==(null===(o=e.sent)||void 0===o?void 0:o.status)){e.next=9;break}return e.abrupt("return",o.data);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("Unable to get movies: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}var ge=function(e,t){return he.apply(this,arguments)},ve=function(e,t){var n={};return e.forEach((function(e){return n[e]=t[e].value})),n},ye=["id","title","year","poster_url"],we=function(e){var t=Object.keys(e[0]);return Object(P.map)(e,(function(e){return t.filter((function(e){return ye.includes(e)})).reduce((function(t,n){return t[n]=e[n],t}),{})}))},ke={first_name:{required:!0,validator:{regEx:/^[A-Za-z ]+$/,error:"Invalid first name format."}},last_name:{required:!0,validator:{regEx:/^[a-zA-Z ]+$/,error:"Invalid last name format."}},email:{required:!0,validator:{regEx:/^\S+@\S+$/,error:"Invalid email format."}},password:{required:!0,validator:{regEx:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/,error:"Your password must contain at least six characters, including one letter, one number and no spaces."}}},Se=function(e,t,n){if(!t)return e;var a=e;return Object(P.map)(n,(function(e){return a[e].value=t[e]})),a};function _e(){return(_e=Object(re.a)(ae.a.mark((function e(t){var n,a,r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.sessionStorage.getItem("jwt_movies")){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,Ce(n,t);case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return r=we(a),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e,t){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(re.a)(ae.a.mark((function e(t,n){var a,r,c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(oe,"/movies?size=30&order=title&direction=asc&page=").concat(n),r={Authorization:"Bearer ".concat(t)},e.prev=2,e.next=5,ie.a.get(a,{headers:r});case 5:if(200!==(null===(c=e.sent)||void 0===c?void 0:c.status)){e.next=8;break}return e.abrupt("return",c.data);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Unable to get movies: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var Be=function(e){return _e.apply(this,arguments)};function Fe(){return(Fe=Object(re.a)(ae.a.mark((function e(t){var n,a,r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.sessionStorage.getItem("jwt_movies")){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,Ie(n,t);case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return r=we([a]),e.abrupt("return",r[0]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t){return Te.apply(this,arguments)}function Te(){return(Te=Object(re.a)(ae.a.mark((function e(t,n){var a,r,c,i;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(oe,"/movies/random_unrated"),r=JSON.stringify(Object(ee.a)(Object(ee.a)({},se),n)),c={Authorization:"Bearer ".concat(t)},e.prev=3,e.next=6,ie.a.get(a,{params:r,headers:c});case 6:if(200!==(null===(i=e.sent)||void 0===i?void 0:i.status)){e.next=9;break}return e.abrupt("return",i.data);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("Unable to get unrated random movie: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}var Ae=function(e){return Fe.apply(this,arguments)};function Ee(){return(Ee=Object(re.a)(ae.a.mark((function e(t,n){var a,r,c,i,o;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.sessionStorage.getItem("jwt_movies")){e.next=3;break}return e.abrupt("return",void 0);case 3:return r="".concat(oe,"movies/").concat(t,"/rate"),c={score:n},i={Authorization:"Bearer ".concat(a)},e.prev=6,e.next=9,ie.a.post(r,c,{headers:i});case 9:if(200!==(null===(o=e.sent)||void 0===o?void 0:o.status)){e.next=14;break}return e.abrupt("return",{success:!0});case 14:if(404!==(null===o||void 0===o?void 0:o.status)){e.next=18;break}return e.abrupt("return",{success:!1,error:"The movie provided can not be found."});case 18:if(422!==(null===o||void 0===o?void 0:o.status)){e.next=22;break}return e.abrupt("return",{success:!1,error:"The rating process could not finish successfully. Please, try again later."});case 22:return e.abrupt("return",{success:!1,error:"An error has occurred. Please, try again later."});case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(6),console.error("Unable to register new rate for film ".concat(t,":"),e.t0);case 28:case"end":return e.stop()}}),e,null,[[6,25]])})))).apply(this,arguments)}var Me=function(e,t){return Ee.apply(this,arguments)},De=c.a.createContext({});function We(e){var t=e.children,n=Object(r.useState)(null),c=Object(m.a)(n,2),i=c[0],o=c[1];return Object(a.jsx)(De.Provider,{value:{jwt:i,setJWT:o},children:t})}var Le=De;function ze(){var e=Object(r.useContext)(Le),t=e.jwt,n=e.setJWT,a=Object(r.useState)({loading:!1,error:!1}),c=Object(m.a)(a,2),i=c[0],o=c[1],s=Object(r.useCallback)((function(e){o({loading:!0,error:!1}),je(e).then((function(e){console.log("apiResponse",e);var t=e.data.token;window.sessionStorage.setItem("jwt_movies",t),o({loading:!1,error:!1}),n(t)})).catch((function(){window.sessionStorage.removeItem("jwt_movies"),o({loading:!1,error:!0})}))}),[n]),l=Object(r.useCallback)((function(e){o({loading:!0,error:!1}),ue(e).then((function(e){var t=e.data.token;window.sessionStorage.setItem("jwt_movies",t),o({loading:!1,error:!1}),n(t)})).catch((function(){window.sessionStorage.removeItem("jwt_movies"),o({loading:!1,error:!0})})),n("test")}),[n]),u=Object(r.useCallback)((function(){window.sessionStorage.removeItem("jwt_movies"),n(null)}),[n]);return{isLogged:Boolean(t),isLoading:i.loading,hasError:i.error,signIn:s,signUp:l,signOut:u}}function Pe(e){switch(e){case"profile":return Object(a.jsx)(Y.a,{});case"movies":return Object(a.jsx)(X.a,{});case"rate":return Object(a.jsx)(Q.a,{});case"sign_out":return Object(a.jsx)($.a,{});default:return null}}var qe=function(e){var t=e.name,n=e.onClose,r=ze().signOut,c=Object(P.replace)(Object(P.upperFirst)(t),"_"," "),i="sign_out"===t?"/":"/".concat(t),o="home"!==t;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(q.a,{button:!0,component:s.b,to:i,onClick:function(){"sign_out"===t&&r(),n()},children:[o&&Object(a.jsx)(G.a,{children:Pe(t)}),Object(a.jsx)(V.a,{primary:c})]},t)})},Re=function(e){var t=e.error;return Object(a.jsx)("p",{style:{color:t?"#f44336":"#ffffff",marginTop:2,marginBottom:4,fontSize:"0.7rem"},children:t||"XX"})};function Ge(e){return Object(a.jsx)(B.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,style:{fontWeight:"bold",alignSelf:"flex-start"},children:e.children})}var Ue=n(246),Ve=n(140),Je=n.n(Ve),Ye=Object(C.a)({paper:{marginTop:b.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"},button:{marginTop:b.spacing(6),alignSelf:"flex-start",marginBottom:b.spacing(4)}}),Ze=function(e){var t=e.children,n=e.title,r=e.withBackButton,c=Ye(),i=Object(p.g)();return Object(a.jsx)(Ue.a,{maxWidth:"lg",children:Object(a.jsxs)("div",{className:c.paper,children:[Object(a.jsx)(Ge,{children:n}),t,r&&Object(a.jsx)("div",{className:c.button,children:Object(a.jsx)(N.a,{variant:"contained",color:"secondary","aria-label":"Go back",startIcon:Object(a.jsx)(Je.a,{}),onClick:function(){return i.goBack()},children:"Go back"})})]})})},$e=n(247),He=n(142),Xe=n.n(He),Ke=n(141),Qe=n.n(Ke),et=Object(C.a)((function(){return Object($e.a)({input:{display:"none"}})})),tt=function(e){var t=e.value,n=e.selectedValue,r=e.handleClickStar,c=et();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{className:c.input,id:"icon-button-star-".concat(t),type:"number"}),Object(a.jsx)("label",{htmlFor:"icon-button-star-".concat(t),children:Object(a.jsx)(w.a,{color:"primary","aria-label":"give rate ".concat(t),disabled:!!n,component:"span",onClick:function(){return r(t)},children:n&&n>=t?Object(a.jsx)(Qe.a,{}):Object(a.jsx)(Xe.a,{})})})]})},nt=function(e){var t=e.selectedValue,n=e.handleClickStar;return Object(a.jsx)("div",{children:[1,2,3,4,5].map((function(e,r){return Object(a.jsx)(tt,{value:e,handleClickStar:n,selectedValue:t},r)}))})},at=n(249),rt=n(250),ct=n(143),it=n.n(ct),ot=Object(C.a)((function(e){return Object($e.a)({root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper,marginBottom:e.spacing(8)},gridList:{width:"100%",height:"100%",justifyContent:"center"},icon:{color:"#ff6363"}})})),st=function(e){var t=e.item,n=ot();return t?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(at.a,{cols:2,style:{margin:10},component:"div",children:[Object(a.jsx)("img",{src:t.poster_url,alt:t.title}),Object(a.jsx)(rt.a,{title:t.title,subtitle:t.year,actionIcon:Object(a.jsx)(w.a,{component:s.b,to:"/movie_detail/".concat(t.id),"aria-label":"info about ".concat(t.title),className:n.icon,children:Object(a.jsx)(it.a,{})})})]},t.id)}):null},lt=n(251),ut=n(252),dt=Object(C.a)((function(e){return Object($e.a)({root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper,marginBottom:e.spacing(8)},gridList:{width:"100%",height:"100%",justifyContent:"center"},icon:{color:"#ff6363"}})})),jt=function(e){var t=e.data,n=e.title,r=dt();return Object(a.jsx)("div",{className:r.root,children:Object(a.jsxs)(lt.a,{cellHeight:150,spacing:8,className:r.gridList,children:[Object(a.jsx)(at.a,{cols:2,style:{height:"auto"},children:Object(a.jsx)(ut.a,{component:"div",children:n})},"Subheader"),t.map((function(e,t){return Object(a.jsx)(st,{item:e},t)}))]})})},bt=n(253),pt=Object(C.a)((function(e){return{description:{padding:e.spacing(3,0)},title:{marginTop:e.spacing(3)}}})),mt=function(e){var t=e.title,n=e.description,r=pt();return Object(a.jsxs)(a.Fragment,{children:[t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B.a,{variant:"h6",gutterBottom:!0,className:r.title,children:t}),Object(a.jsx)(bt.a,{})]}),Object(a.jsx)(B.a,{variant:"body1",className:r.description,gutterBottom:!0,children:n})]})},ft=n(254),ht=n(213),Ot=n.p+"static/media/imdb.50cc2796.png";function xt(){var e=Object(M.a)(['\n  width: 60px;\n  height: "auto";\n']);return xt=function(){return e},e}var gt=Object(C.a)((function(e){return{sidebarAboutBox:{padding:e.spacing(2),backgroundColor:e.palette.grey[200]},sidebarSection:{marginTop:e.spacing(3)}}})),vt=D.a.img(xt()),yt=function(e){var t=e.title,n=e.data,r=e.url,c=gt();return Object(a.jsxs)(ht.a,{elevation:0,className:c.sidebarAboutBox,children:[Object(a.jsx)(B.a,{variant:"h6",gutterBottom:!0,children:t}),Object(a.jsx)(_.a,{mb:2,children:n.map((function(e,t){return Object(a.jsx)(B.a,{children:Object(P.replace)(e.key,"_"," ")+": "+Object(P.upperFirst)(e.value)},t)}))}),Object(a.jsx)(F.a,{display:"block",variant:"body1",href:r,target:"_blank",rel:"noreferrer","aria-label":"go to movie detail at IMDb",children:Object(a.jsxs)(ft.a,{container:!0,direction:"row",spacing:1,alignItems:"center",children:[Object(a.jsx)(ft.a,{item:!0,children:Object(a.jsx)(vt,{src:Ot,alt:"IMDb Logo"})}),Object(a.jsx)(ft.a,{item:!0,children:"See more"})]})},"imdb-link")]})},wt=n(256),kt=n(264),St=n(257),_t=n(255),Ct=n(144),Nt=n.n(Ct),Bt=n(145),Ft=n.n(Bt),It=Object(C.a)({margin:{marginVertical:b.spacing(1)}}),Tt=function(e){var t=e.isTypePassword,n=e.required,c=e.autoFocus,i=e.id,o=e.state,s=e.handleOnChange,l=It(),u=Object(r.useState)(!1),d=Object(m.a)(u,2),j=d[0],b=d[1];return Object(a.jsxs)(_t.a,{fullWidth:!0,className:l.margin,children:[Object(a.jsx)(kt.a,{variant:"filled",htmlFor:i,children:Object(P.startCase)(Object(P.replace)(i,"_"," "))}),Object(a.jsx)(wt.a,{id:i,type:t&&!j?"password":"text",value:o.value,name:i,onChange:s,"aria-describedby":i,inputProps:{"aria-label":i},autoFocus:c,required:n,endAdornment:t&&Object(a.jsx)(St.a,{position:"end",children:Object(a.jsx)(w.a,{"aria-label":"toggle password visibility",onClick:function(){b(!j)},onMouseDown:function(e){e.preventDefault()},edge:"end",children:j?Object(a.jsx)(Nt.a,{}):Object(a.jsx)(Ft.a,{})})})}),Object(a.jsx)(Re,{error:o.error})]})},At=Object(C.a)({paper:{marginTop:b.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"}}),Et=function(e){var t=e.children,n=e.title,r=At();return Object(a.jsxs)(Ue.a,{component:"main",maxWidth:"xs",children:[Object(a.jsxs)("div",{className:r.paper,children:[Object(a.jsx)(z,{}),Object(a.jsx)(_.a,{m:2}),Object(a.jsx)(B.a,{component:"h1",variant:"h5",paragraph:!0,children:n}),t]}),Object(a.jsx)(_.a,{mt:8})]})},Mt=function(){return Object(a.jsx)(Et,{title:"Sign in",children:Object(a.jsx)(Xt,{type:"sign_in"})})},Dt=function(){return Object(a.jsx)(Et,{title:"Sign up",children:Object(a.jsx)(Xt,{type:"sign_up"})})},Wt=function(){return Object(a.jsx)(Ze,{title:"Home",children:Object(a.jsx)("span",{children:" "})})},Lt=n(258),zt=function(e){var t=e.movie_id,n=Object(r.useState)(void 0),c=Object(m.a)(n,2),i=c[0],o=c[1];return Object(r.useEffect)((function(){(function(){var e=Object(re.a)(ae.a.mark((function e(){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(t);case 2:(n=e.sent)&&o(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(a.jsx)(Ze,{title:"Movie detail",withBackButton:!0,children:Object(a.jsx)("main",{children:i?Object(a.jsx)(en,{movie:i}):Object(a.jsx)(Lt.a,{})})})},Pt=function(){var e=Object(p.g)(),t=Object(r.useState)([]),n=Object(m.a)(t,2),c=n[0],i=n[1],o=Object(r.useState)(1),s=Object(m.a)(o,2),l=s[0],u=s[1],d=function(){var e=Object(re.a)(ae.a.mark((function e(){var t,n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be(l);case 2:(t=e.sent)&&(console.log("numPages",l),console.log("movies",c),n=c.length?Object(P.concat)(c,t):t,i(n),u(l+1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){d()}),[e]),Object(a.jsx)(Ze,{title:"Your movies",children:Object(a.jsx)(cn,{movies:c,loadMovies:d})})},qt=function(){var e=Object(p.g)(),t=Object(r.useState)(void 0),n=Object(m.a)(t,2),c=n[0],i=n[1],o=Object(r.useState)(void 0),s=Object(m.a)(o,2),l=s[0],u=s[1],d=Object(r.useCallback)((function(){(function(){var t=Object(re.a)(ae.a.mark((function t(){var n;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ae();case 2:(n=t.sent)?i(n):e.push("/");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]);return Object(r.useEffect)((function(){d()}),[d]),Object(a.jsxs)(Ze,{title:"Rate random movies",children:[Object(a.jsx)(st,{item:c}),Object(a.jsx)(on,{rate:l,loadRandomMovie:d,setRate:u,handleSaveRate:function(){c&&Me(c.id,l)&&(d(),u(void 0))},handleClickStar:function(e){u(e)}})]})},Rt=Object(C.a)({paper:{marginTop:b.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"}}),Gt=function(){var e=Rt(),t=Object(r.useState)(!1),n=Object(m.a)(t,2),c=n[0],i=n[1],o=Object(r.useState)(void 0),s=Object(m.a)(o,2),l=s[0],u=s[1];return Object(r.useEffect)((function(){(function(){var e=Object(re.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe();case 2:(t=e.sent)&&u(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.jsx)(Ze,{title:"Your profile",children:Object(a.jsxs)(Ue.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)("div",{className:e.paper,children:l?c?Object(a.jsx)(Xt,{type:"profile",user:l,closeFormAfterChange:function(e){e&&u(e),i(!1)}}):Object(a.jsx)(ln,{user:l,setShowForm:i}):Object(a.jsx)(Lt.a,{})}),Object(a.jsx)(_.a,{mt:8})]})})},Ut=function(e){return{root:{flexGrow:1,justifyContent:"space-between"},flex:{flex:1},drawerPaper:{position:"relative",width:240},menuButton:{marginLeft:-12,marginRight:20},toolbarMargin:e.mixins.toolbar,aboveDrawer:{zIndex:e.zIndex.drawer+1,widht:"100%"},barContent:{flex:1,justifyContent:"space-between"},white:{backgroundColor:"#ffffff"}}},Vt=Object(O.a)(Ut)((function(e){var t=e.classes,n=(e.title,e.onMenuClick);return Object(a.jsxs)("div",{children:[Object(a.jsx)(x.a,{className:t.aboveDrawer,color:"primary",position:"fixed",children:Object(a.jsxs)(g.a,{className:t.barContent,children:[Object(a.jsx)(w.a,{className:t.menuButton,color:"inherit","aria-label":"Menu",onClick:n,children:Object(a.jsx)(S.a,{})}),Object(a.jsx)(z,{})]})}),Object(a.jsx)("div",{className:t.toolbarMargin})]})})),Jt=Object(O.a)(Ut)((function(e){var t=e.classes,n=e.variant,r=e.open,c=e.onClose;e.onItemClick;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(v.a,{variant:n,open:r,onClose:c,classes:{paper:t.drawerPaper},children:[Object(a.jsx)("div",{className:Object(h.default)(Object(f.a)({},t.toolbarMargin,"persistent"===n))}),Object(a.jsxs)(y.a,{children:[Object(a.jsx)(qe,{name:"home",onClose:c}),Object(a.jsx)(qe,{name:"movies",onClose:c}),Object(a.jsx)(qe,{name:"rate",onClose:c}),Object(a.jsx)(qe,{name:"profile",onClose:c}),Object(a.jsx)(qe,{name:"sign_out",onClose:c})]})]}),Object(a.jsxs)("main",{className:t.content,children:[Object(a.jsx)(p.b,{exact:!0,path:"/home",component:Wt}),Object(a.jsx)(p.b,{exact:!0,path:"/movies",component:Pt}),Object(a.jsx)(p.b,{exact:!0,path:"/rate",component:qt}),Object(a.jsx)(p.b,{exact:!0,path:"/profile",component:Gt}),Object(a.jsx)(p.b,{exact:!0,path:"/movie_detail/:movie_id",render:function(e){var t=e.match;return Object(a.jsx)(zt,{movie_id:t.params.movie_id})}}),Object(a.jsx)(p.a,{from:"/",to:"/movies"})]})]})}));var Yt=Object(O.a)(Ut)((function(e){var t=e.classes,n=e.variant,c=Object(r.useState)(!1),i=Object(m.a)(c,2),o=i[0],s=i[1],l=Object(r.useState)("Home"),u=Object(m.a)(l,2),d=u[0],j=u[1],b=function(){s(!o)};return Object(a.jsxs)(_.a,{className:t.root,children:[Object(a.jsx)(Vt,{title:d,onMenuClick:b}),Object(a.jsx)(Jt,{open:o,onClose:b,onItemClick:function(e){return function(){j(e),s("temporary"!==n&&o),s(!o)}},variant:n,anchor:"right"})]})})),Zt=Object(C.a)({paper:{marginTop:b.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:b.spacing(1)},submit:{margin:b.spacing(3,0,2)},margin:{marginVertical:b.spacing(1)}}),$t={first_name:{value:"",error:""},last_name:{value:"",error:""},email:{value:"",error:""},password:{value:"",error:""}},Ht={sign_up:{keys:["first_name","last_name","email","password"],defaultFormState:$t,validationFormStateSchema:ke,primary_btn:"Sign up",secondary_btn:{text:"Already have an account?",action:"Sign in"}},sign_in:{keys:["email","password"],defaultFormState:Object(P.omit)($t,["first_name","last_name"]),validationFormStateSchema:Object(P.omit)(ke,["first_name","last_name"]),primary_btn:"Sign in",secondary_btn:{text:"New at Lomana Movies?",action:"Sign up"}},profile:{keys:["first_name","last_name","password"],defaultFormState:Object(P.omit)($t,["email"]),validationFormStateSchema:Object(P.omit)(ke,["email"]),primary_btn:"Save changes",secondary_btn:{text:"",action:"Cancel edition"}}},Xt=function(e){var t=e.type,n=e.user,c=e.closeFormAfterChange,i=Zt(),o=Object(p.g)(),l=ze(),u=l.signIn,d=l.signUp,j=l.isLogged,b=l.hasError,f="sign_in"!==t,O="profile"!==t,x=Ht[t],g=x.keys,v=x.defaultFormState,y=x.validationFormStateSchema,w=x.primary_btn,k=x.secondary_btn,S=Se(v,n,g),C=Object(r.useRef)(null),F=Object(r.useState)(""),I=Object(m.a)(F,2),T=I[0],A=I[1],E=te(S,y,(function(e){return P.apply(this,arguments)})),M=E.state,D=E.disable,W=E.handleOnChange,L=E.handleOnSubmit;Object(r.useEffect)((function(){j&&"profile"!==t&&o.push("/")}),[j,o]),Object(r.useEffect)((function(){b&&A("An error has occurred. Please, try again later.")}),[b]);var z=function(){var e=Object(re.a)(ae.a.mark((function e(t){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?c&&c(t):A("An error has occurred. Please, try again later.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function P(){return(P=Object(re.a)(ae.a.mark((function e(n){var a,r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ve(g,n),"profile"!==t){e.next=7;break}return e.next=4,fe(a);case 4:return r=e.sent,z(r),e.abrupt("return");case 7:"sign_in"===t?u(a):"sign_up"===t&&d(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)("form",{className:i.form,noValidate:!0,onSubmit:L,children:[f&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Tt,{required:!0,autoFocus:!0,id:"first_name",state:M.first_name,handleOnChange:W}),Object(a.jsx)(Tt,{required:!0,id:"last_name",state:M.last_name,handleOnChange:W})]}),O&&Object(a.jsx)(Tt,{required:!0,id:"email",state:M.email,handleOnChange:W}),Object(a.jsx)(Tt,{required:!0,isTypePassword:!0,id:"password",state:M.password,handleOnChange:W}),Object(a.jsx)(_.a,{mb:2,children:Object(a.jsx)(B.a,{variant:"body2",color:"error",children:T})}),Object(a.jsxs)(_.a,{className:Object(h.default)(i.margin,"col"),children:[Object(a.jsx)("input",{type:"submit",ref:C,name:"submit",disabled:D,value:"Submit",style:{display:"none"}}),Object(a.jsxs)(N.a,{disabled:D,fullWidth:!0,variant:"contained",color:"primary","aria-label":w,className:i.submit,onClick:function(){C.current&&C.current.click()},children:[w," "]}),O?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(B.a,{variant:"body2",color:"textSecondary",align:"center",className:i.form,children:[k.text,Object(a.jsx)(N.a,{component:s.b,to:f?"/sign_in":"/sign_up",variant:"text",color:"secondary","aria-label":f?"sign_in":"sign_up",children:k.action})]})}):Object(a.jsx)(N.a,{fullWidth:!0,variant:"outlined",color:"secondary","aria-label":k.action,onClick:function(){return c&&c()},children:k.action})]})]})},Kt=Object(C.a)((function(e){return{mainGrid:{marginTop:e.spacing(3)},itemGrid:{paddingTop:0,paddingBottom:0}}})),Qt=["year","published_at","duration","country","language","director"],en=function(e){var t=e.movie,n=Kt(),r=t.title,c=t.description,i=t.poster_url,o=t.url,s=Object(P.map)(Qt,(function(e){return{key:e,value:t[e]}}));return Object(a.jsxs)(ft.a,{container:!0,spacing:5,className:n.mainGrid,children:[Object(a.jsx)(ft.a,{item:!0,md:2,xs:12,className:n.itemGrid,children:Object(a.jsx)("img",{src:i,alt:"thumbnail of ".concat(r)})}),Object(a.jsx)(ft.a,{item:!0,xs:12,md:6,className:n.itemGrid,children:Object(a.jsx)(mt,{title:r,description:c})}),Object(a.jsx)(ft.a,{item:!0,xs:12,md:4,className:n.itemGrid,children:Object(a.jsx)(yt,{title:"In depth",data:s,url:o})})]})},tn=n(266),nn=n(147),an=n.n(nn),rn=Object(C.a)({container:{width:"100%"},form:{width:"100%",marginTop:b.spacing(1),maxWidth:600},submit:{margin:b.spacing(3,0,2)},margin:{marginVertical:b.spacing(1)},withoutLabel:{marginTop:b.spacing(3)},button:{marginTop:b.spacing(6),alignSelf:"flex-end",marginBottom:b.spacing(4),marginRight:10}}),cn=function(e){var t=e.movies,n=e.loadMovies,c=rn(),i=Object(r.useState)(""),o=Object(m.a)(i,2),s=o[0],l=o[1],u=Object(r.useState)([]),d=Object(m.a)(u,2),j=d[0],b=d[1],p=s?"Filtered results":"All the available movies",f=s?j:t,h=function(e){if(t.length){var n=function(e){return Object(P.filter)(t,(function(t){return Object(P.includes)(Object(P.toLower)(t.title),Object(P.toLower)(e))}))}(e);b(n)}};return Object(r.useEffect)((function(){h(s)}),[t]),Object(a.jsxs)("div",{className:c.container,children:[Object(a.jsxs)(_.a,{m:3,children:[Object(a.jsx)(B.a,{component:"h6",paragraph:!0,children:"Filter your movies by title:"}),Object(a.jsx)("form",{className:c.form,noValidate:!0,children:Object(a.jsx)(_t.a,{fullWidth:!0,className:c.margin,children:Object(a.jsx)(tn.a,{id:"filter-by-title",value:Object(P.startCase)(s),name:"first_name",onChange:function(e){var t=e.target.value;l(t),h(t)},"aria-describedby":"title",inputProps:{"aria-label":"title"},autoFocus:!0,placeholder:"Title","aria-placeholder":"Title"})})})]}),Object(a.jsx)(jt,{title:p,data:f}),Object(a.jsx)("div",{className:c.button,children:Object(a.jsx)(N.a,{variant:"contained",color:"secondary","aria-label":"More movies",endIcon:Object(a.jsx)(an.a,{}),onClick:n,children:"More movies"})})]})},on=function(e){var t=e.rate,n=e.loadRandomMovie,r=e.setRate,c=e.handleSaveRate,i=e.handleClickStar;return Object(a.jsxs)("div",{children:[Object(a.jsx)(nt,{handleClickStar:i,selectedValue:t}),Object(a.jsx)(Ue.a,{style:{flex:1,flexDirection:"row",justifyContent:"center"},children:t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(N.a,{style:{margin:20},variant:"outlined",color:"secondary","aria-label":"Edit",onClick:function(){return r(void 0)},children:"Edit"}),Object(a.jsxs)(N.a,{style:{margin:20},variant:"contained",color:"primary","aria-label":"Save",onClick:c,children:["Save"," "]})]}):Object(a.jsx)(N.a,{style:{margin:20},variant:"outlined",color:"secondary","aria-label":"Change the film",onClick:n,children:"Change the film"})})]})},sn=Object(C.a)((function(e){return{description:{padding:e.spacing(3,0)},title:{marginTop:e.spacing(3)}}})),ln=function(e){var t=e.setShowForm,n=e.user,r=sn();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Y.a,{fontSize:"large"}),Object(a.jsxs)(B.a,{variant:"h6",gutterBottom:!0,className:r.title,children:[Object(P.upperFirst)(n.first_name)," ",Object(P.upperFirst)(n.last_name)]}),Object(a.jsx)(bt.a,{}),Object(a.jsx)(B.a,{variant:"body1",className:r.description,gutterBottom:!0,children:n.email}),Object(a.jsx)(N.a,{fullWidth:!0,variant:"contained",color:"primary","aria-label":"Edit profile",onClick:function(){return t(!0)},children:"Edit profile"}),Object(a.jsx)(B.a,{variant:"caption",className:r.description,gutterBottom:!0,children:"* The email associated to your account can't be changed."})]})},un=function(){var e=ze().isLogged;return console.log("isLogged ff",e),Object(a.jsx)(s.a,{children:Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(p.d,{children:[Object(a.jsx)(p.b,{exact:!0,path:"/sign_in",component:Mt}),Object(a.jsx)(p.b,{exact:!0,path:"/sign_up",component:Dt}),e?Object(a.jsx)(Yt,{variant:"temporary"}):Object(a.jsx)(p.b,{path:"/",component:E}),Object(a.jsx)(p.b,{exact:!0,path:"/",component:E})]})})})},dn=Object(a.jsx)(s.a,{children:Object(a.jsx)(l.a,{theme:b,children:Object(a.jsxs)(We,{children:[Object(a.jsx)(u.a,{}),Object(a.jsx)(un,{})]})})});o.a.render(dn,document.getElementById("root"))}},[[207,1,2]]]);
//# sourceMappingURL=main.fe0abc5f.chunk.js.map